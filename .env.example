# Freeze Dry Node — Environment Configuration
# Copy to .env and fill in your values
#
# This node can run as a reader (indexes chain, serves artwork),
# a writer (inscribes memos to Solana), or both.
#
# Free Helius key: polling via standard RPC (works, slightly slower)
# Paid Helius key: Enhanced API auto-detected on startup (~50x cheaper)

# ─── Required ───

# Helius RPC key (get a free key at https://helius.dev)
HELIUS_API_KEY=your-helius-api-key-here

# ─── Role ───

# "reader" = index chain + serve artwork (default behavior)
# "writer" = accept inscription jobs from coordinator
# "both"   = reader + writer (default)
ROLE=both

# ─── Wallet (coordinator registration + writer) ───
# Solana keypair as JSON array [1,2,...,64] — generate with: solana-keygen new
# Used for: coordinator auto-registration (ed25519 wallet auth) + writer operations
# Without this, your node can still discover peers but won't appear in the coordinator registry.
# WALLET_KEYPAIR=

# Max concurrent inscription jobs (default: 3)
# CAPACITY=3

# Shared API key — must match the key configured on the coordinator (freezedry.art)
# API_KEY=

# ─── Discovery (Reader) ───

# Wallet to scan for FREEZEDRY: pointer memos.
# Default: official Freeze Dry inscriber — your node auto-indexes all public content.
# Change this to index a different inscriber's content.
SERVER_WALLET=6ao3hnvKQJfmQ94xTMV34uLUP6azVNHzCfip1ic5Nafj

# Registry URL for startup backfill (seeds existing artworks on first run)
REGISTRY_URL=https://freezedry.art/api/registry

# Coordinator URL for auto-registration + peer discovery
# Your node registers itself (wallet auth) and discovers other nodes automatically.
COORDINATOR_URL=https://freezedry.art

# ─── Optional ───

# Webhook/ingest auth secret — REQUIRED for write endpoints (/ingest, /webhook/helius)
# Without this, those endpoints return 403 (read-only mode).
# The setup wizard (bash scripts/setup.sh) generates this automatically.
# Manual: openssl rand -hex 32
# Set the same value in the Helius dashboard webhook config if using webhooks.
WEBHOOK_SECRET=

# Force Enhanced API on/off (auto-detected by default)
# USE_ENHANCED_API=true

# Custom RPC URL (overrides default Helius RPC)
# HELIUS_RPC_URL=https://mainnet.helius-rpc.com/?api-key=YOUR_KEY

# Poll interval in milliseconds (default: 120000 = 2 min)
POLL_INTERVAL=120000

# Blob access: "false" (default) = only active peers can download blobs.
# Set to "true" to serve blobs publicly (open cache mode).
# BLOB_PUBLIC=false

# Server port
PORT=3100

# Node identity (shown in /health and peer sync)
NODE_ID=my-freezedry-node

# ─── Peer Network ───

# Your node's public URL (needed for bidirectional peer announcements)
# Other nodes will use this to reach you. Must be publicly accessible.
# NODE_URL=https://node.yourdomain.com

# Comma-separated list of peer node URLs to connect to on startup.
# Your node will sync artwork from peers (faster than chain reads)
# and share its peer list (gossip protocol).
# PEER_NODES=https://node1.example.com,https://node2.example.com

# ─── Additional RPC fallbacks (Writer) ───

# Optional fallback RPC endpoints for transaction sending
# SHYFT_API_KEY=
# CHAINSTACK_SOLANA_URL=
